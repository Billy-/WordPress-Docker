version: "2"
services:
    lamp: 
        extends: 
            file: common.yml
            service: lamp
    wp:
        extends:
            file: common.yml
            service: wp
        depends_on:
            - lamp
        volumes:
            - ./dist:/var/www/wp-content/themes/dev-theme
        ports:
            - 8080:80
    build:
        extends:
            file: common.yml
            service: build
        volumes:
            - ./src:/app/src
            - ./dist:/app/dist
        command: npm run watch